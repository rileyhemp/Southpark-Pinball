{"version":3,"sources":["classes.js"],"names":["StaticShape","scene","type","x","y","width","height","rotation","collisionGroup","label","body","drawShape","object","matter","add","image","setExistingBody","setVisible","setCollisionCategory","rectangle","isStatic","angle","circle","alert","StaticCustomShape","name","world","Bodies","fromVertices","PATHS","restitution","setStatic","Phaser","Physics","Matter","Image","Bumper","setCircle","setScale","setDepth","mass","collisionGroupB","canAnimate","canPlaySound","position","sounds","sound","playAudioSprite","Math","floor","random","length","volume","startPosition","targetX","targetY","tweens","targets","yoyo","duration","repeat","setTimeout","Sensor","isSensor","Launcher","createComponents","rectA","create","parts","top","collisionGroupA","setCollidesWith","inertia","Infinity","bottom","left","right","spring","constraint","backgroundMusic","play","update","setInterval","clearInterval"],"mappings":"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","sourcesContent":["class StaticShape \r\n{\r\n    constructor(scene, type, x, y, width, height, rotation, collisionGroup, label)\r\n    {\r\n        this.body = {}\r\n        this.scene = scene\r\n        this.type = type\r\n        this.x = x\r\n        this.y = y\r\n        this.width = width\r\n        this.height = height\r\n        this.rotation = rotation\r\n        this.drawShape()\r\n        this.object = this.scene.matter.add.image(this.x, this.y, null).setExistingBody(this.body).setVisible(false)\r\n        this.object.setCollisionCategory(collisionGroup)\r\n        this.body.label = label\r\n    }\r\n\r\n    drawShape()\r\n    {\r\n        if (this.type === 'rectangle')\r\n        {\r\n            this.body = this.scene.matter.add.rectangle(this.x, this.y, this.width, this.height, {\r\n                isStatic: true,\r\n                angle: this.rotation\r\n                }\r\n            )\r\n        } \r\n        else if (this.type === 'circle')\r\n        {\r\n            this.body = this.scene.matter.add.circle(this.x, this.y, this.width, {\r\n                isStatic: true\r\n                }\r\n            )\r\n        } \r\n        else {alert `${this.type} is not a supported shape`}\r\n    }\r\n}\r\n\r\nclass StaticCustomShape extends Phaser.Physics.Matter.Image \r\n{\r\n    constructor(scene, x, y, name, collisionGroup)\r\n    {\r\n        super(scene.matter.world, x, y, name)\r\n        this.setExistingBody(Bodies.fromVertices(0,0, PATHS[`${name}`]))\r\n        this.body.restitution = 0\r\n        this.body.label = name\r\n        this.setVisible(false)\r\n        this.setStatic(true)\r\n        this.x = x\r\n        this.y = y\r\n        this.setCollisionCategory(collisionGroup)\r\n    }\r\n}\r\n\r\nclass Bumper extends Phaser.Physics.Matter.Image \r\n{\r\n    constructor(scene, x, y, name)\r\n    {\r\n        super(scene.matter.world, x, y, name)\r\n        this.setCircle(24)\r\n        this.setStatic(true)\r\n\t\tthis.setScale(0.75)\r\n\t\tthis.setDepth(5)\r\n        this.body.mass = .999\r\n        this.x = x\r\n        this.y = y\r\n        this.body.label = name\r\n        this.scene = scene\r\n        this.body.restitution = 1\r\n        this.setCollisionCategory(collisionGroupB)\r\n        this.canAnimate = true\r\n        this.canPlaySound = true\r\n    }\r\n\r\n    fire(position)\r\n    {\r\n        let sounds = ['Bumper', 'BumperLeft', 'BumperMiddle', 'BumperRight']\r\n\r\n        if (this.canAnimate) \r\n        {\r\n            //Play a random bumper sound & a bell\r\n            this.scene.sound.playAudioSprite('sound_effects', sounds[Math.floor(Math.random()*sounds.length)])\r\n            this.scene.sound.playAudioSprite('sound_effects', 'bell_ding', {\r\n                volume: 0.2\r\n            })\r\n            \r\n            //Restrict firing \r\n            this.canAnimate = false\r\n            \r\n            //Grab the starting position\r\n            let startPosition = \r\n            {\r\n                x: this.x,\r\n                y: this.y\r\n            }\r\n            //Calculate the midpoint between the ball and bumper\r\n            let targetX = (this.x + position.x) / 2\r\n            let targetY = (this.y + position.y) / 2\r\n\r\n            //Tween to that point\r\n            this.scene.tweens.add(\r\n            {\r\n                targets: this,\r\n                x: targetX,\r\n                y: targetY,\r\n                yoyo: true,\r\n                duration: 20,\r\n                repeat: 0\r\n            })\r\n\r\n            //Move the bumper back to the starting position and un-restrict firing shortly thereafter. \r\n            setTimeout(()=>\r\n            {\r\n                this.x = startPosition.x\r\n                this.y = startPosition.y\r\n                setTimeout(()=>\r\n                {\r\n                    this.canAnimate = true\r\n                }, 100)\r\n            }, 40)\r\n        }\r\n    }\r\n}\r\n\r\nclass Sensor extends StaticShape \r\n{\r\n    constructor(scene, x, y, width, height, rotation, type, name, collisionGroup)\r\n    {\r\n        super(scene, 'rectangle', x, y, width, height, rotation, collisionGroup)\r\n        this.body.isSensor = true\r\n        this.body.type = type\r\n        this.body.label = name\r\n    }\r\n}\r\n\r\nclass Launcher \r\n{\r\n    constructor(scene, x, y) \r\n    {\r\n        this.x = x\r\n        this.y = y\r\n        this.scene = scene\r\n        this.createComponents()\r\n    }\r\n\r\n    createComponents() \r\n    {\r\n        //Create the top of the launcher\r\n        let rectA = Phaser.Physics.Matter.Matter.Bodies.circle(this.x , this.y, 15)\r\n        let body = this.scene.matter.body.create({\r\n            parts: [ rectA ]\r\n        })\r\n        this.top = this.scene.matter.add.image(150, 0, null).setExistingBody(body).setVisible(false)\r\n        this.top.setCollisionCategory(collisionGroupA)\r\n        this.top.setCollidesWith(collisionGroupA)\r\n        this.top.body.inertia = Infinity\r\n        //Create the rest of the launcher\r\n        this.bottom = new StaticShape(this.scene, 'rectangle', this.x, this.y + 50, 40, 20, 0, collisionGroupA )\r\n        this.left = new StaticShape(this.scene, 'rectangle', this.x - 10, this.y, 10, 100, 0, collisionGroupA )\r\n        this.right = new StaticShape(this.scene, 'rectangle', this.x + 10, this.y, 10, 100, 0, collisionGroupA )\r\n        this.spring = this.scene.matter.add.constraint(this.bottom, this.top)\r\n        this.spring.length = 90\r\n    }\r\n\r\n    charge() \r\n    {\r\n        //Starts the music\r\n        backgroundMusic.play()\r\n\r\n        //Pulls back the spring until it reaches desired length\r\n        this.update = setInterval(() => \r\n        {\r\n            this.spring.length--\r\n            if (this.spring.length < 70)\r\n            {\r\n                clearInterval(this.update)\r\n            }\r\n        }, 40)\r\n    }\r\n\r\n    fire() \r\n    {\r\n        //Play sound\r\n        this.scene.sound.playAudioSprite('sound_effects', \"Plunger\")\r\n\r\n        //Stop pulling the spring back\r\n        clearInterval(this.update)\r\n\r\n        //Tween back to the starting position. The time is constant, so the greater distance the greater the impact. \r\n        this.scene.tweens.add(\r\n        {\r\n            targets: this.spring,\r\n            length: 102,\r\n            duration: 20\r\n        })\r\n\r\n        //Reset the spring\r\n        setTimeout(() => \r\n        {\r\n            this.spring.length = 90\r\n        }, 50)\r\n    }\r\n}\r\n"],"file":"classes.js"}