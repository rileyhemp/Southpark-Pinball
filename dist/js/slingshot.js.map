{"version":3,"sources":["slingshot.js"],"names":["Slingshot","scene","x1","y1","x2","y2","x3","y3","links","group","matter","world","nextGroup","width","height","boxes","add","stack","x","y","Phaser","Physics","Matter","Bodies","rectangle","collisionFilter","chamfer","density","frictionAir","bounce","friction","label","chain","stiffness","length","render","visible","worldConstraint","bodies","pointA","pointB","block","image","isStatic","scaleX","scaleY","setCollidesWith","collisionGroupB","constraint","Math","floor","setTimeout"],"mappings":"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","sourcesContent":["class Slingshot {\r\n\r\n    constructor(scene, x1, y1, x2, y2, x3, y3, links){\r\n\r\n        this.scene = scene\r\n        this.x1 = x1\r\n        this.x2 = x2\r\n        this.y1 = y1\r\n        this.y2 = y2\r\n\r\n        var group = scene.matter.world.nextGroup(true)\r\n\r\n        let width = 8\r\n        let height = 20\r\n\r\n        this.boxes = scene.matter.add.stack(x1, y1, links, 1, 0, 0, function(x, y) {\r\n            return Phaser.Physics.Matter.Matter.Bodies.rectangle(x - 20, y, width, height, { \r\n                collisionFilter: { group: group },\r\n                chamfer: 0,\r\n                density: .01,\r\n                frictionAir: 0,\r\n                bounce: 0.001,\r\n                friction: 0,\r\n                label: 'Slingshot'\r\n            })\r\n        })\r\n\r\n        this.chain = scene.matter.add.chain(this.boxes, 0.5, 0, -0.5, 0, {\r\n            stiffness: 1,\r\n            length: .2,\r\n            render: {\r\n                visible: false\r\n            }\r\n        })\r\n\r\n\r\n\r\n\r\n        \r\n\r\n        scene.matter.add.worldConstraint(this.boxes.bodies[0], .2, 0.9, {\r\n            pointA: { x: x1, y: y1},\r\n            pointB: { x:-width/2, y:-height/2 +10 }\r\n        })\r\n\r\n        scene.matter.add.worldConstraint(this.boxes.bodies[this.boxes.bodies.length -1], .2, 0.9, {\r\n            pointA: { x: x2, y: y2},\r\n            pointB: { x: width/2, y:-height/2 +10}\r\n        })\r\n\r\n        this.block = this.scene.matter.add.image(x3, y3, 'rectA', this.scene, {\r\n            isStatic: true,\r\n        })\r\n        this.block.scaleX = .02\r\n        this.block.scaleY = 0.1\r\n        this.block.visible = false\r\n        this.block.setCollidesWith(collisionGroupB)\r\n\r\n\r\n        this.constraint = scene.matter.add.constraint( this.block, this.boxes.bodies[Math.floor(this.boxes.bodies.length/2)], 2, 0.0001, {\r\n            pointA: {x: 0, y: 0},\r\n            pointB: {x: 0, y: 0},\r\n        })\r\n\r\n    }\r\n\r\n    fire(){\r\n        this.constraint.stiffness = .4\r\n\r\n        setTimeout(()=>{\r\n            this.constraint.stiffness = .0001\r\n        }, 20)\r\n        //game.time.events.add(Phaser.Timer.SECOND * 1, this.release, this)\r\n    }\r\n\r\n    charge(){\r\n        \r\n    }\r\n\r\n    release(){\r\n        this.constraint.stiffness = 0.0001\r\n    }\r\n\r\n}"],"file":"slingshot.js"}