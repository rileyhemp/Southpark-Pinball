{"version":3,"sources":["flipper.js"],"names":["Flipper","scene","x","y","options","blockOffsetX","blockOffsetY","flipperOffsetX","flipperOffsetY","flipperLength","flipperWidth","speed","startPosition","endPosition","block","matter","add","image","isStatic","scaleX","scaleY","originX","originY","visible","pivot","setScale","setCircle","setStatic","rectA","Phaser","Physics","Matter","Bodies","rectangle","chamfer","flipperBody","body","create","parts","flipper","setExistingBody","setVisible","pin","constraint","stiffness","length","pistonPin","positionPin","setCollisionCategory","collisionGroupA","setCollidesWith","tweens","targets","duration","LeftFlipper","pointA","pointB","RightFlipper","blockRotation","stopperOffsetX","torque","staticTorque","SideFlipper","stopperOffsetY"],"mappings":"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","sourcesContent":["class Flipper {\r\n    constructor(scene, x, y, options){\r\n        this.scene = scene\r\n        this.x = x\r\n        this.y = y\r\n        this.blockOffsetX = 45\r\n        this.blockOffsetY = 80\r\n        this.flipperOffsetX = 25\r\n        this.flipperOffsetY = 20\r\n        this.flipperLength = 78\r\n        this.flipperWidth = 40\r\n        this.speed = 60\r\n        this.startPosition = 28\r\n        this.endPosition = 105\r\n    }\r\n\r\n    createComponents(){\r\n        \r\n        //Bottom block\r\n        this.block = this.scene.matter.add.image(this.x + this.blockOffsetX,this.y + this.blockOffsetY, 'rectA', this.scene, {\r\n            isStatic: true\r\n        })\r\n        this.block.scaleX = .02\r\n        this.block.scaleY = .1\r\n        this.block.originX = 1\r\n        this.block.originY = 0\r\n        this.block.visible = false\r\n\r\n        //Pivot point\r\n        this.pivot = this.scene.matter.add.image(this.x, this.y, null, this.scene)\r\n        this.pivot.setScale(.2)\r\n        this.pivot.setCircle(1)\r\n        this.pivot.setStatic(true)\r\n\r\n        //Flipper \r\n\r\n        let rectA = Phaser.Physics.Matter.Matter.Bodies.rectangle(this.x + this.flipperOffsetX , this.y + this.flipperOffsetY, this.flipperLength, this.flipperWidth, {\r\n            chamfer: 10,\r\n        })\r\n\r\n        this.flipperBody = this.scene.matter.body.create({\r\n            parts: [ rectA ]\r\n        })\r\n\r\n        \r\n        this.flipper = this.scene.matter.add.image(150, 0, null).setExistingBody(this.flipperBody).setVisible(false)\r\n\r\n\r\n        //Joints\r\n        \r\n        this.pin = this.scene.matter.add.constraint(this.pivot, this.flipper)\r\n        this.pin.stiffness = 0.9\r\n        this.pin.length = 0\r\n\r\n        this.pistonPin = this.scene.matter.add.constraint(this.flipper, this.block)\r\n        this.pistonPin.length = this.startPosition\r\n\r\n        this.positionPin()\r\n    }\r\n\r\n    setCollisionGroups(){\r\n\r\n        this.flipper.setCollisionCategory(collisionGroupA)\r\n        this.flipper.setCollidesWith(collisionGroupA)\r\n    }\r\n\r\n    flip(){\r\n        this.scene.tweens.add({\r\n            targets: this.pistonPin,\r\n            length: this.endPosition,\r\n            duration: this.speed\r\n        })\r\n    }\r\n\r\n    release(){\r\n        this.scene.tweens.add({\r\n            targets: this.pistonPin,\r\n            length: this.startPosition,\r\n            duration: this.speed\r\n        })\r\n    }\r\n\r\n}\r\n\r\nclass LeftFlipper extends Flipper {\r\n    constructor(scene, x, y){\r\n        super(scene, x, y)\r\n        super.createComponents()\r\n        super.setCollisionGroups()\r\n    }\r\n    positionPin(){\r\n        this.pin.pointA = {\r\n            x: 5,  \r\n            y: 5\r\n        }\r\n        this.pin.pointB = {\r\n            x: -this.flipperLength/2, \r\n            y: -this.flipperWidth/2 + 10\r\n        }\r\n        this.pistonPin.pointA = {\r\n            x: this.flipperLength/2.5, \r\n            y: 0\r\n        }\r\n    }\r\n}\r\n\r\nclass RightFlipper extends Flipper {\r\n    constructor(scene, x, y){\r\n        super(scene, x, y)\r\n        this.blockOffsetX = -this.blockOffsetX\r\n        this.blockRotation = -this.blockRotation\r\n        this.stopperOffsetX = -this.stopperOffsetX\r\n        this.flipperOffsetX = -this.flipperOffsetX\r\n        this.torque = -this.torque\r\n        this.staticTorque = -this.staticTorque\r\n        super.createComponents()\r\n        super.setCollisionGroups()\r\n    }\r\n    positionPin(){\r\n        this.pin.pointA = {\r\n            x: -5,  \r\n            y: 5\r\n        }\r\n        this.pin.pointB = {\r\n            x: this.flipperLength/2, \r\n            y: -this.flipperWidth/2 + 10\r\n        }\r\n        this.pistonPin.pointA = {\r\n            x: -this.flipperLength/2.5, \r\n            y: 0\r\n        }\r\n    }\r\n}\r\n\r\nclass SideFlipper extends Flipper {\r\n    constructor(scene, x, y){\r\n        super(scene, x, y)\r\n        this.blockOffsetX = 5\r\n        this.blockOffsetY = 40\r\n        this.blockRotation = -1.2\r\n        this.stopperOffsetX = -40\r\n        this.stopperOffsetY = -5\r\n        this.flipperLength = 70\r\n        this.torque = -this.torque\r\n        this.staticTorque = -this.staticTorque\r\n        super.createComponents()\r\n        super.setCollisionGroups()\r\n    }\r\n    positionPin(){\r\n        this.pin.pointA = {\r\n            x: -5,  \r\n            y: 5\r\n        }\r\n        this.pin.pointB = {\r\n            x: this.flipperLength/2-3, \r\n            y: 0\r\n        }\r\n        this.pistonPin.pointA = {\r\n            x: -this.flipperLength/2.5, \r\n            y: 0\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n"],"file":"flipper.js"}