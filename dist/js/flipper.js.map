{"version":3,"sources":["flipper.js"],"names":["Flipper","scene","x","y","options","blockOffsetX","blockOffsetY","flipperOffsetX","flipperOffsetY","flipperLength","flipperWidth","speed","startPosition","endPosition","block","matter","add","image","isStatic","scaleX","scaleY","originX","originY","visible","pivot","setScale","setCircle","setStatic","rectA","Phaser","Physics","Matter","Bodies","rectangle","chamfer","flipperBody","body","create","parts","flipper","setExistingBody","setVisible","pin","constraint","stiffness","length","pistonPin","positionPin","setCollisionCategory","collisionGroupA","setCollidesWith","tweens","targets","duration","LeftFlipper","pointA","pointB","RightFlipper","SideFlipper"],"mappings":"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","sourcesContent":["class Flipper {\n    constructor(scene, x, y, options){\n        this.scene = scene\n        this.x = x\n        this.y = y\n        this.blockOffsetX = 45\n        this.blockOffsetY = 80\n        this.flipperOffsetX = 25\n        this.flipperOffsetY = 20\n        this.flipperLength = 78\n        this.flipperWidth = 40\n        this.speed = 60\n        this.startPosition = 28\n        this.endPosition = 100\n    }\n\n    createComponents(){\n        \n        //Bottom block\n        this.block = this.scene.matter.add.image(this.x + this.blockOffsetX,this.y + this.blockOffsetY, 'rectA', this.scene, {\n            isStatic: true\n        })\n        this.block.scaleX = .02\n        this.block.scaleY = .1\n        this.block.originX = 1\n        this.block.originY = 0\n        this.block.visible = false\n\n        //Pivot point\n        this.pivot = this.scene.matter.add.image(this.x, this.y, null, this.scene)\n        this.pivot.setScale(.2)\n        this.pivot.setCircle(1)\n        this.pivot.setStatic(true)\n\n        //Flipper \n\n        let rectA = Phaser.Physics.Matter.Matter.Bodies.rectangle(this.x + this.flipperOffsetX , this.y + this.flipperOffsetY, this.flipperLength, this.flipperWidth, {\n            chamfer: 10,\n        })\n\n        this.flipperBody = this.scene.matter.body.create({\n            parts: [ rectA ]\n        })\n\n        this.flipper = this.scene.matter.add.image(150, 0, null).setExistingBody(this.flipperBody).setVisible(false)\n\n\n        //Joints\n        \n        this.pin = this.scene.matter.add.constraint(this.pivot, this.flipper)\n        this.pin.stiffness = 0.9\n        this.pin.length = 0\n\n        this.pistonPin = this.scene.matter.add.constraint(this.flipper, this.block)\n        this.pistonPin.length = this.startPosition\n\n        this.positionPin()\n    }\n\n    setCollisionGroups(){\n\n        this.flipper.setCollisionCategory(collisionGroupA)\n        this.flipper.setCollidesWith(collisionGroupA)\n    }\n\n    flip(){\n        this.scene.tweens.add({\n            targets: this.pistonPin,\n            length: this.endPosition,\n            duration: this.speed\n        })\n    }\n\n    release(){\n        this.scene.tweens.add({\n            targets: this.pistonPin,\n            length: this.startPosition,\n            duration: this.speed\n        })\n    }\n\n}\n\nclass LeftFlipper extends Flipper {\n    constructor(scene, x, y){\n        super(scene, x, y)\n        super.createComponents()\n        super.setCollisionGroups()\n    }\n    positionPin(){\n        this.pin.pointA = {\n            x: 5,  \n            y: 5\n        }\n        this.pin.pointB = {\n            x: -this.flipperLength/2, \n            y: -this.flipperWidth/2 + 10\n        }\n        this.pistonPin.pointA = {\n            x: this.flipperLength/2.5, \n            y: 0\n        }\n    }\n}\n\nclass RightFlipper extends Flipper {\n    constructor(scene, x, y){\n        super(scene, x, y)\n        this.blockOffsetX = -this.blockOffsetX\n        this.flipperOffsetX = -this.flipperOffsetX\n        this.endPosition = 105\n        super.createComponents()\n        super.setCollisionGroups()\n    }\n    positionPin(){\n        this.pin.pointA = {\n            x: -5,  \n            y: 5\n        }\n        this.pin.pointB = {\n            x: this.flipperLength/2, \n            y: -this.flipperWidth/2 + 10\n        }\n        this.pistonPin.pointA = {\n            x: -this.flipperLength/2.5, \n            y: 0\n        }\n    }\n}\n\nclass SideFlipper extends Flipper {\n    constructor(scene, x, y){\n        super(scene, x, y)\n        this.blockOffsetX = 25\n        this.blockOffsetY = 60\n        this.flipperLength = 70\n        this.flipperWidth = 35\n        this.startPosition = 50\n        this.endPosition = 90\n        this.speed = 40\n        super.createComponents()\n        super.setCollisionGroups()\n    }\n    positionPin(){\n        this.pin.pointA = {\n            x: -5,  \n            y: 5\n        }\n        this.pin.pointB = {\n            x: this.flipperLength/2-3, \n            y: 0\n        }\n        this.pistonPin.pointA = {\n            x: -this.flipperLength/2.5, \n            y: 0\n        }\n    }\n}\n\n\n\n\n"],"file":"flipper.js"}