{"version":3,"sources":["game.js"],"names":["config","type","Phaser","CANVAS","width","height","physics","default","matter","debug","gravity","x","y","game","balls","scene","preload","create","update","table","ramps","characters","leftFlipper","rightFlipper","sideFlipper","bumperA","bumperB","bumperC","leftSlingshot","rightSlingshot","launcher","ball","spacebar","left","right","down","collisionGroupA","collisionGroupB","collisionGroupC","collisionGroupD","collisionGroupE","sensorGroupA","sensorGroupB","cartmanLeft","cartmanCenter","cartmanRight","cartmanBlock","rampsCartmanActive","rampsCartmanGate","buttersLightOn","gameActive","backgroundMusic","eventMusic","lights","currentScene","welcomeScreen","test","currentBall","multiplier","score","rampsLit","cartmanCanStart","alerts","Bodies","Physics","Matter","Game","navigator","userAgent","isMobile","document","body","style","visibility","querySelector","addEventListener","newGame","maxHeight","window","innerHeight","minHeight","initDomControls","displaySection","appendChild","playRandomSound","input","on","pointer","world","nextCategory","keyboard","addKey","Input","Keyboard","KeyCodes","LEFT","DOWN","RIGHT","SPACE","initLights","add","image","setDepth","setScale","LeftFlipper","RightFlipper","SideFlipper","Bumper","Slingshot","Launcher","createStaticObjects","initCollisionListeners","JustDown","flip","JustUp","release","charge","fire","length","getNewBall","endGame","cartman","hit","startEvent","Object","keys","forEach","el","flashLights","sound","textContent","stop","clearLights","play","Ball","playAudioSprite","restartBall","isDestroyed","destroy","pop","addScore","name","modifier","amount","total","sprite","delay","spritemap","cache","json","get","setTimeout","Math","floor","random","alert","message","timeout","text","innerText","playAlerts","i","undefined","innerHTML","loop","setInterval","tableWidth","canvas","offsetWidth","leftButton","rightButton","bottom"],"mappings":"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","sourcesContent":["/* \r\n\r\nSouth Park Pinball v1.0\r\n\r\nBuilt by Riley Hemphill @ The Creative Circus, 2019\r\n\r\n*/\r\n\r\n//Initial config\r\nconst config = \r\n{\r\n\ttype: Phaser.CANVAS,\r\n    width: 520,\r\n    height: 800,\r\n    physics: {\r\n        default: 'matter',\r\n        matter: {\r\n            debug: false,\r\n            gravity: \r\n            {\r\n                x: 0,\r\n                y: .9\r\n            }\r\n        }\r\n    },\r\n    game: \r\n    {\r\n        balls: 3\r\n    },\r\n    scene: \r\n    {\r\n        preload: preload, \r\n        create: create,\r\n        update: update \r\n\t},\r\n}\r\n\r\n//Declare global variables \r\n\r\nlet table, ramps, characters, \r\nleftFlipper, rightFlipper, sideFlipper,\r\nbumperA, bumperB, bumperC,\r\nleftSlingshot, rightSlingshot,\r\nlauncher, ball,\r\nspacebar, left, right, down,\r\ncollisionGroupA, collisionGroupB, collisionGroupC, collisionGroupD, collisionGroupE,\r\nsensorGroupA, sensorGroupB,\r\ncartmanLeft, cartmanCenter, cartmanRight, cartmanBlock, rampsCartmanActive, rampsCartmanGate, \r\nbuttersLightOn,\r\ngameActive,\r\nbackgroundMusic, eventMusic, \r\nlights, \r\ncurrentScene,\r\nwelcomeScreen,\r\ntest\r\n\r\nlet balls = []\r\nlet currentBall = 0\r\nlet multiplier = 1\r\nlet score = 0\r\nlet rampsLit = 0\r\nlet cartmanCanStart = true\r\nlet alerts = []\r\n\r\nconst Bodies = Phaser.Physics.Matter.Matter.Bodies\r\nconst game = new Phaser.Game(config)\r\n\r\nif( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) \r\n{\r\n\tgame.config.isMobile = true\r\n} else \r\n{\r\n\tgame.config.isMobile = false\r\n}\r\n\r\n//Create\r\n\r\nfunction create() {\r\n\tdocument.body.style.visibility = 'visible'\r\n\tcurrentScene = this\r\n\twelcomeScreen = document.querySelector('.start-screen')\r\n\twelcomeScreen.addEventListener('click', ()=>\r\n\t{\r\n\t\twelcomeScreen.style.visibility = 'hidden'\r\n\t\tnewGame(this)\r\n\t})\r\n\t//Size to fit\r\n\tdocument.querySelector('canvas').style.maxHeight = window.innerHeight+'px'\r\n\tdocument.querySelector('canvas').style.minHeight = window.innerHeight+'px'\r\n\r\n\tinitDomControls()\r\n\r\n\t//Move score section to the right of the newly created canvas\r\n\tlet displaySection = document.querySelector('.display')\r\n\tdocument.body.appendChild(displaySection)\r\n\r\n\ttest = this\r\n\t\r\n\tplayRandomSound('intro_music', this)\r\n\r\n    //What to do on click\r\n    this.input.on('pointerdown', function(pointer)\r\n    {\r\n\r\n        // console.log(pointer.x+\",\", pointer.y)\r\n\r\n\r\n        // ball = new Ball(this, pointer.x, pointer.y, 'ball') \r\n\t\t// ball.setVelocityY(-20)\r\n\t\t// ball.setVelocityX(-20)\r\n        //Start a new game\r\n        // newGame(this)\r\n    }, this)\r\n\t\r\n    //Setup collision groups \r\n    sensorGroupA = this.matter.world.nextCategory() // Ground level sensors\r\n    sensorGroupB = this.matter.world.nextCategory() // Upper level sensors\r\n    collisionGroupA = this.matter.world.nextCategory() // Ball\r\n    collisionGroupB = this.matter.world.nextCategory() // Walls\r\n    collisionGroupC = this.matter.world.nextCategory() \r\n    collisionGroupD = this.matter.world.nextCategory()\r\n    collisionGroupE = this.matter.world.nextCategory()\r\n\r\n    //Setup controls\r\n    left = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.LEFT)\r\n    down = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.DOWN)\r\n    right = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.RIGHT)\r\n    spacebar = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE)\r\n\r\n    initLights(this)\r\n\r\n    //Textures\r\n    table = this.add.image(260, 400, 'table').setDepth(1)\r\n    ramps = this.add.image(260, 400, 'ramps').setDepth(4)\r\n\trampsCartmanActive =  this.add.image(260, 400, 'ramps_cartman_active').setDepth(1)\r\n\trampsCartmanGate = this.add.image(260,400, 'ramps_cartman_gate').setDepth(1)\r\n    characters = this.add.image(260, 380, 'characters').setDepth(5).setScale(0.4)\r\n    \r\n    //Flippers\r\n    leftFlipper = new LeftFlipper(this, 150, 632) \r\n    rightFlipper = new RightFlipper(this, 327, 632)\r\n    sideFlipper = new SideFlipper(this, 407, 313)\r\n\r\n    //Pop bumpers\r\n    bumperA = new Bumper(this, 308, 125, 'bumper')\r\n    bumperB = new Bumper(this, 365, 135, 'bumper')\r\n    bumperC = new Bumper(this, 335, 190, 'bumper')\r\n\r\n    //Slingshots\r\n    leftSlingshot = new Slingshot(this, 121, 490, 152, 574, 177, 510, 5, 'leftSlingshot')\r\n    rightSlingshot = new Slingshot(this, 353, 491, 324, 574, 298, 510, 5, 'rightSlingshot')\r\n\r\n    //Launcher\r\n    launcher = new Launcher(this, 455, 755)\r\n    \r\n    //Static Objects\r\n    /*********************************************************/\r\n    //See static-objects.js\r\n\r\n    createStaticObjects(this)\r\n\r\n    //Collision events\r\n    /*********************************************************/\r\n    //See collisions.js\r\n\r\n\tinitCollisionListeners(this) \r\n}\r\n\r\n\r\n//Update\r\n/*********************************************************/\r\n\r\nfunction update() {\r\n    \r\n    if (Phaser.Input.Keyboard.JustDown(left))\r\n    {\r\n        leftFlipper.flip() \r\n    } \r\n    \r\n    if (Phaser.Input.Keyboard.JustUp(left))\r\n    {\r\n        leftFlipper.release()\r\n    } \r\n\r\n    if (Phaser.Input.Keyboard.JustDown(right))\r\n    {\r\n        rightFlipper.flip()\r\n        sideFlipper.flip()\r\n    } \r\n\r\n    if (Phaser.Input.Keyboard.JustUp(right))\r\n    {\r\n        rightFlipper.release()\r\n        sideFlipper.release()\r\n    } \r\n\r\n    if (Phaser.Input.Keyboard.JustDown(down))\r\n    {\r\n        launcher.charge()\r\n    }\r\n\r\n    if (Phaser.Input.Keyboard.JustUp(down))\r\n    {\r\n        launcher.fire()\r\n    }\r\n\r\n    //Round is over when no balls are in play\r\n    if (balls.length === 0)\r\n    {\r\n        //Get a new ball if there are any remaining. Otherwise end the game.\r\n        if ( currentBall <= config.game.balls - 1 && gameActive)\r\n        {\r\n            getNewBall(this)\r\n        }\r\n        else if (gameActive)\r\n        { \r\n\t\t\tendGame(this)\r\n            gameActive = false\r\n        }\r\n    }\r\n\r\n\t//Events \r\n\t\r\n\r\n\t//Cartman\r\n    if (lights.cartman.cartmanLeft.hit>0 && lights.cartman.cartmanCenter.hit>0 && lights.cartman.cartmanRight.hit>0 && cartmanCanStart)\r\n    {\r\n\t\tstartEvent('cartman', this)\r\n\t}\r\n\t\r\n\t//Butters\r\n\tObject.keys(lights).forEach(el =>\r\n\t{\r\n\t\tlights[el].hit  >  0 && !buttersLightOn ? flashLights('butters', 1) : null\r\n\t})\r\n} \r\n\r\n//Functions \r\n/*********************************************************/\r\n\r\nfunction newGame(scene)\r\n{\r\n    gameActive = true\r\n    score = 0\r\n    multiplier = 1\r\n\tbackgroundMusic = scene.sound.add('background_music')\t\r\n\tgetNewBall(scene)\r\n}\r\n\r\nfunction endGame(scene)\r\n{\r\n\tdocument.querySelector('.start-screen > h1').textContent = \"Game Over\"\r\n\tdocument.querySelector('.byline').textContent = 'Final score: ' + score\r\n\tdocument.querySelector('.start-screen > a').textContent = ''\r\n\tdocument.querySelector('.start-screen > p:nth-child(4)').textContent = 'Click to play again'\r\n\twelcomeScreen.style.visibility = 'visible'\r\n    backgroundMusic.stop()\r\n\tscore = 0\r\n\tdocument.querySelector('.score').textContent = score\r\n\tcurrentBall = 0\r\n}\r\n\r\nfunction getNewBall(scene)\r\n{\r\n\tclearLights()\r\n    backgroundMusic.play()\r\n\tball = new Ball(scene, 455, 669, 'ball') \r\n    scene.sound.playAudioSprite('sound_effects', \"rollover\")\r\n\tcurrentBall++\r\n\tdocument.querySelector('.balls-remaining').textContent = currentBall\r\n}\r\n\r\nfunction restartBall(scene)\r\n{\r\n\tballs.forEach(el=>\r\n\t\t{\r\n\t\t\tel.isDestroyed = true\r\n\t\t\tel.destroy()\r\n\t\t\tballs.pop()\r\n\t\t\tbackgroundMusic.play()\r\n\t\t\tball = new Ball(scene, 455, 669, 'ball') \r\n\t\t\tscene.sound.playAudioSprite('sound_effects', \"rollover\")\r\n\t\t})\r\n}\r\n\r\nfunction addScore(name, modifier)\r\n{\r\n    let amount\r\n    switch(name)\r\n    {\r\n        case \"bumper\" : amount = 1000 \r\n            break\r\n        case \"butters\" : amount = 10000\r\n            break\r\n        case \"ramp\" : amount = 5000\r\n            break\r\n        case \"cartman-win\" : amount = 1000000\r\n            break\r\n        case \"cartman-body\" : amount = 25000\r\n            break\r\n        case \"loop\" : amount = 10000\r\n\t\t\tbreak\r\n\t\tcase \"jackpot\" : amount = 25000 * modifier \r\n\t\t\tbreak\r\n\t\tcase \"super-jackpot\" : amount = 500000\r\n\t\t\tbreak\r\n    }\r\n    let total = amount * multiplier\r\n\tscore += total\r\n    document.querySelector('.score').textContent = score\r\n}\r\n\r\n\r\nfunction playRandomSound(sprite, scene, delay)\r\n{\r\n\tlet spritemap = Object.keys(scene.cache.json.get(sprite).spritemap)\r\n    setTimeout(()=>{\r\n        scene.sound.playAudioSprite(sprite, spritemap[Math.floor(Math.random()*spritemap.length)])\r\n    }, delay)\r\n}\r\n\r\nfunction alert(message, timeout)\r\n{\r\n\tlet text = document.querySelector('.alert-window')\r\n\ttext.innerText = message\r\n\r\n\tsetTimeout(()=>\r\n\t{\r\n\t\ttext.innerText === message ? text.innerText = '' : null\r\n\t}, timeout)\r\n\r\n}\r\n\r\nfunction playAlerts(alerts)\r\n{\r\n\tlet text = document.querySelector('.alert-window')\r\n\tlet i = 0\r\n\talerts[i] != undefined ? text.innerHTML = alerts[i] : null\r\n\tlet loop = setInterval(()=>\r\n\t{\r\n\t\tif (i<alerts.length-1)\r\n\t\t{\r\n\t\t\ti++\r\n\t\t\talerts[i] != undefined ? text.innerHTML = alerts[i] : null\r\n\t\t} \r\n\t\telse if (alerts.length > 0)\r\n\t\t{\r\n\t\t\ti=0\r\n\t\t\talerts[i] != undefined ? text.innerHTML = alerts[i] : null\r\n\t\t} else {\r\n\t\t\ttext.innerHTML = ''\r\n\t\t}\r\n\t}, 3000)\r\n}\r\n\r\nfunction initDomControls()\r\n{\r\n\r\n\tdocument.querySelector('.display').style.visibility = 'visible'\r\n\tlet tableWidth = game.canvas.offsetWidth\r\n\tif (game.config.isMobile === true)\r\n\t{\r\n\t\tlet leftButton = document.querySelector('.left-button')\r\n\t\tlet rightButton = document.querySelector('.right-button')\r\n\t\tleftButton.style.visibility = 'visible'\r\n\t\trightButton.style.visibility = 'visible'\r\n\t\tleftButton.style.bottom = '20px'\r\n\t\trightButton.style.bottom = '20px'\r\n\t\tleftButton.style.left = '30px'\r\n\t\trightButton.style.left = tableWidth - 175 + 'px'\r\n\t\tleftButton.addEventListener('touchstart', function()\r\n\t\t{\r\n\t\t\tleftFlipper.flip() \r\n\t\t})\r\n\r\n\t\tleftButton.addEventListener('touchend', function()\r\n\t\t{\r\n\t\t\tleftFlipper.release() \r\n\t\t})\r\n\r\n\t\trightButton.addEventListener('touchstart', function()\r\n\t\t{\r\n\t\t\trightFlipper.flip() \r\n\t\t})\r\n\r\n\t\trightButton.addEventListener('touchend', function()\r\n\t\t{\r\n\t\t\trightFlipper.release() \r\n\t\t})\r\n\t}\r\n}\r\n\r\ndocument.querySelector('#reload-button').addEventListener('click', function()\r\n{\r\n\trestartBall(currentScene)\r\n})\r\n"],"file":"game.js"}