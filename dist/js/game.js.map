{"version":3,"sources":["game.js"],"names":["config","type","Phaser","CANVAS","width","height","physics","default","matter","debug","gravity","x","y","game","balls","scene","preload","create","update","table","ramps","characters","leftFlipper","rightFlipper","sideFlipper","bumperA","bumperB","bumperC","leftSlingshot","rightSlingshot","launcher","ball","spacebar","left","right","down","collisionGroupA","collisionGroupB","collisionGroupC","collisionGroupD","collisionGroupE","sensorGroupA","sensorGroupB","cartmanLeft","cartmanCenter","cartmanRight","cartmanBlock","rampsCartmanActive","objectives","gameActive","backgroundMusic","eventMusic","lights","currentBall","multiplier","score","Bodies","Physics","Matter","Game","playRandomSound","input","on","pointer","newGame","world","nextCategory","keyboard","addKey","Input","Keyboard","KeyCodes","LEFT","DOWN","RIGHT","SPACE","initLights","add","image","setDepth","LeftFlipper","RightFlipper","SideFlipper","Bumper","Slingshot","Launcher","createStaticObjects","initCollisionListeners","JustDown","flip","JustUp","release","charge","fire","length","getNewBall","startEvent","sound","endGame","console","log","stop","pause","Ball","playAudioSprite","document","querySelector","textContent","addScore","name","amount","total","registerHit","bodyA","bodyB","volume","render","visible","isDestroyed","destroy","setTimeout","setVelocityY","setVelocityX","cartman","one","active","two","three","sprite","delay","spritemap","Object","keys","cache","json","get","Math","floor","random","comboCounter"],"mappings":"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","sourcesContent":["/* \r\n\r\nSouth Park Pinball v1.0\r\n\r\nBuilt by Riley Hemphill @ The Creative Circus, 2019\r\n\r\n*/\r\n\r\n//Initial config\r\nconst config = \r\n{\r\n    type: Phaser.CANVAS,\r\n    width: 520,\r\n    height: 800,\r\n    physics: {\r\n        default: 'matter',\r\n        matter: {\r\n            debug: false,\r\n            gravity: \r\n            {\r\n                x: 0,\r\n                y: .9\r\n            }\r\n        }\r\n    },\r\n    game: \r\n    {\r\n        balls: 3\r\n    },\r\n    scene: \r\n    {\r\n        preload: preload, \r\n        create: create,\r\n        update: update \r\n    }\r\n}\r\n\r\n//Declare global variables \r\n\r\nlet table, ramps, characters, \r\nleftFlipper, rightFlipper, sideFlipper,\r\nbumperA, bumperB, bumperC,\r\nleftSlingshot, rightSlingshot,\r\nlauncher, ball,\r\nspacebar, left, right, down,\r\ncollisionGroupA, collisionGroupB, collisionGroupC, collisionGroupD, collisionGroupE,\r\nsensorGroupA, sensorGroupB,\r\ncartmanLeft, cartmanCenter, cartmanRight, cartmanBlock, rampsCartmanActive,\r\nobjectives, \r\ngameActive,\r\nbackgroundMusic, eventMusic, \r\nlights\r\n\r\nlet balls = []\r\nlet currentBall = 1\r\nlet multiplier = 1\r\nlet score = 0\r\n\r\nconst Bodies = Phaser.Physics.Matter.Matter.Bodies\r\nconst game = new Phaser.Game(config)\r\n\r\nfunction create() {\r\n\r\n\tplayRandomSound('intro_music', this)\r\n\r\n    //What to do on click\r\n    this.input.on('pointerdown', function(pointer)\r\n    {\r\n\r\n        // console.log(pointer.x+\",\", pointer.y)\r\n\r\n\r\n        // ball = new Ball(this, pointer.x, pointer.y, 'ball') \r\n        // ball.setVelocityY(-10)\r\n\r\n\r\n\r\n        //Start a new game\r\n        newGame(this)\r\n    }, this)\r\n\r\n    //Setup collision groups \r\n    sensorGroupA = this.matter.world.nextCategory() // Ground level sensors\r\n    sensorGroupB = this.matter.world.nextCategory() // Upper level sensors\r\n    collisionGroupA = this.matter.world.nextCategory() // Ball\r\n    collisionGroupB = this.matter.world.nextCategory() // Walls\r\n    collisionGroupC = this.matter.world.nextCategory() \r\n    collisionGroupD = this.matter.world.nextCategory()\r\n    collisionGroupE = this.matter.world.nextCategory()\r\n\r\n    //Setup controls\r\n    left = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.LEFT)\r\n    down = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.DOWN)\r\n    right = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.RIGHT)\r\n    spacebar = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE)\r\n\r\n    initLights(this)\r\n    \r\n    //Create object to store hit counts for each objective\r\n    objectives = \r\n    {\r\n        'cartman-left': 0,\r\n        'cartman-center': 0,\r\n        'cartman-right': 0,\r\n        'cartman-himself': 0,\r\n        'loop-hit': 0\r\n    }\r\n\r\n    //Textures\r\n    table = this.add.image(260, 400, 'table').setDepth(1)\r\n    ramps = this.add.image(260, 400, 'ramps').setDepth(2)\r\n    rampsCartmanActive =  this.add.image(260, 400, 'ramps_cartman_active').setDepth(0)\r\n    characters = this.add.image(260, 400, 'characters').setDepth(4)\r\n    \r\n    //Flippers\r\n    leftFlipper = new LeftFlipper(this, 150, 632) \r\n    rightFlipper = new RightFlipper(this, 327, 632)\r\n    sideFlipper = new SideFlipper(this, 407, 313)\r\n\r\n    //Pop bumpers\r\n    bumperA = new Bumper(this, 308, 125, 'bumper')\r\n    bumperB = new Bumper(this, 365, 135, 'bumper')\r\n    bumperC = new Bumper(this, 335, 190, 'bumper')\r\n\r\n    //Slingshots\r\n    leftSlingshot = new Slingshot(this, 121, 490, 152, 574, 177, 510, 5, 'leftSlingshot')\r\n    rightSlingshot = new Slingshot(this, 353, 491, 324, 574, 298, 510, 5, 'rightSlingshot')\r\n\r\n    //Launcher\r\n    launcher = new Launcher(this, 455, 755)\r\n    \r\n    //Static Objects\r\n    /*********************************************************/\r\n    //See static-objects.js\r\n\r\n    createStaticObjects(this)\r\n\r\n    //Collision events\r\n    /*********************************************************/\r\n    //See collisions.js\r\n\r\n    initCollisionListeners(this) \r\n}\r\n\r\n//Update\r\n/*********************************************************/\r\n\r\nfunction update() {\r\n    \r\n    if (Phaser.Input.Keyboard.JustDown(left))\r\n    {\r\n        leftFlipper.flip() \r\n    } \r\n    \r\n    if (Phaser.Input.Keyboard.JustUp(left))\r\n    {\r\n        leftFlipper.release()\r\n    } \r\n\r\n    if (Phaser.Input.Keyboard.JustDown(right))\r\n    {\r\n        rightFlipper.flip()\r\n        sideFlipper.flip()\r\n    } \r\n\r\n    if (Phaser.Input.Keyboard.JustUp(right))\r\n    {\r\n        rightFlipper.release()\r\n        sideFlipper.release()\r\n    } \r\n\r\n    if (Phaser.Input.Keyboard.JustDown(down))\r\n    {\r\n        launcher.charge()\r\n    }\r\n\r\n    if (Phaser.Input.Keyboard.JustUp(down))\r\n    {\r\n        launcher.fire()\r\n    }\r\n\r\n    //Round is over when no balls are in play\r\n    if (balls.length === 0)\r\n    {\r\n        //Get a new ball if there are any remaining. Otherwise end the game.\r\n        if ( currentBall <= config.game.balls && gameActive)\r\n        {\r\n            getNewBall(this)\r\n        }\r\n        else\r\n        { \r\n            gameActive = false\r\n        }\r\n    }\r\n\r\n    //Events\r\n    if (objectives['cartman-left'] && objectives['cartman-center'] && objectives['cartman-right'])\r\n    {\r\n        startEvent('cartman', this)\r\n    }\r\n} \r\n\r\n//Functions \r\n/*********************************************************/\r\n\r\nfunction newGame(scene)\r\n{\r\n    gameActive = true\r\n    score = 0\r\n    multiplier = 1\r\n    backgroundMusic = scene.sound.add('background_music')\r\n\tgetNewBall(scene)\r\n}\r\n\r\nfunction endGame()\r\n{\r\n    console.log('game over')\r\n    backgroundMusic.stop()\r\n    score = 0\r\n}\r\n\r\nfunction getNewBall(scene)\r\n{\r\n    backgroundMusic.pause()\r\n    ball = new Ball(scene, 455, 689, 'ball') \r\n    scene.sound.playAudioSprite('sound_effects', \"rollover\")\r\n        currentBall++\r\n        document.querySelector('.balls-remaining').textContent = currentBall\r\n}\r\n\r\nfunction addScore(name)\r\n{\r\n    let amount\r\n    switch(name)\r\n    {\r\n        case \"bumper\" : amount = 1000 \r\n            break\r\n        case \"butters\" : amount = 10000\r\n            break\r\n        case \"ramp\" : amount = 5000\r\n            break\r\n        case \"cartman-win\" : amount = 100000\r\n            break\r\n        case \"randy\" : amount = 2500\r\n            break\r\n        case \"loop\" : amount = 10000\r\n            break\r\n    }\r\n    let total = amount * multiplier\r\n    score += total\r\n    document.querySelector('.score').textContent = score\r\n}\r\n\r\n    //Hit registration\r\n    /*********************************************************/\r\n\r\nfunction registerHit(scene, bodyA, bodyB) {\r\n    switch(bodyA)\r\n    {\r\n        case \"butters\" :\r\n            playRandomSound('butters_hit', scene)  \r\n            scene.sound.playAudioSprite('sound_effects', 'thunder', {volume: 0.5})\r\n            scene.sound.playAudioSprite('sound_effects', 'hole_enter')\r\n            bodyB.render.visible = false\r\n            bodyB.isDestroyed = true\r\n            bodyB.destroy()\r\n            //Holds the ball for 3 seconds and shoots back to left flipper\r\n            setTimeout(()=>\r\n            {\r\n                ball = new Ball(scene, 340, 259, 'ball') \r\n                ball.setVelocityY(3.3)\r\n                ball.setVelocityX(-3.3)\r\n                scene.sound.playAudioSprite('sound_effects', 'ExitSandman')\r\n                addScore('butters')\r\n            }, 3000)     \r\n            break     \r\n\r\n        case \"cartman-hit\" :\r\n            if (!objectives[bodyB] && bodyB != 'cartman-himself')\r\n            {\r\n                objectives[bodyB]++\r\n\t\t\t\tscene.sound.playAudioSprite('sound_effects', 'target')\r\n\r\n\t\t\t\tswitch(bodyB) \r\n\t\t\t\t{\r\n\t\t\t\t\tcase \"cartman-left\" : lights.cartman.one.active = true \r\n\t\t\t\t\tbreak\r\n\t\t\t\t\tcase \"cartman-center\" : lights.cartman.two.active = true \r\n\t\t\t\t\tbreak\r\n\t\t\t\t\tcase \"cartman-right\" : lights.cartman.three.active = true \r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\t// lights.cartman.bodyB.active = true\r\n\t\t\t\tconsole.log(bodyB)\r\n            } \r\n            break          \r\n        \r\n        case \"cartman-himself\" :\r\n            objectives[bodyB]++\r\n            // playRandomSound('cartman_damage', scene)\r\n            scene.sound.playAudioSprite('sound_effects', 'rubber_hit_2')\r\n            break\r\n\r\n        case \"rightTargets\" :\r\n            scene.sound.playAudioSprite('sound_effects', 'rubber_hit_1')    \r\n            addScore('randy')\r\n            break\r\n        \r\n        case \"loop-hit\" :\r\n            addScore('loop')\r\n            objectives[bodyA]++\r\n            console.log(objectives)\r\n    }\r\n}\r\n\r\nfunction playRandomSound(sprite, scene, delay)\r\n{\r\n\tlet spritemap = Object.keys(scene.cache.json.get(sprite).spritemap)\r\n\tconsole.log(spritemap)\r\n    setTimeout(()=>{\r\n        scene.sound.playAudioSprite(sprite, spritemap[Math.floor(Math.random()*spritemap.length)])\r\n    }, delay)\r\n}\r\n\r\nfunction comboCounter(scene)\r\n{\r\n\r\n    //ball hits flippers\r\n    //ball speed exceeds a certain threshold \r\n    //score points\r\n    \r\n}\r\n\r\n"],"file":"game.js"}