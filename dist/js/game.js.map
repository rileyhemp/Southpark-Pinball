{"version":3,"sources":["game.js"],"names":["config","type","Phaser","CANVAS","width","height","physics","default","matter","debug","gravity","x","y","game","balls","scene","preload","create","update","table","ramps","characters","leftFlipper","rightFlipper","sideFlipper","bumperA","bumperB","bumperC","leftSlingshot","rightSlingshot","launcher","ball","spacebar","left","right","down","collisionGroupA","collisionGroupB","collisionGroupC","collisionGroupD","collisionGroupE","sensorGroupA","sensorGroupB","cartmanLeft","cartmanCenter","cartmanRight","cartmanBlock","rampsCartmanActive","rampsCartmanGate","buttersLightOn","gameActive","backgroundMusic","eventMusic","lights","currentScene","welcomeScreen","test","currentBall","multiplier","score","rampsLit","cartmanCanStart","alerts","Bodies","Physics","Matter","Game","navigator","userAgent","isMobile","document","body","style","visibility","querySelector","addEventListener","newGame","maxHeight","window","innerHeight","minHeight","initDomControls","displaySection","appendChild","playRandomSound","input","on","pointer","world","nextCategory","keyboard","addKey","Input","Keyboard","KeyCodes","LEFT","DOWN","RIGHT","SPACE","initLights","add","image","setDepth","setScale","LeftFlipper","RightFlipper","SideFlipper","Bumper","Slingshot","Launcher","createStaticObjects","initCollisionListeners","JustDown","flip","JustUp","release","charge","fire","length","getNewBall","endGame","cartman","hit","startEvent","Object","keys","forEach","el","flashLights","sound","textContent","stop","clearLights","play","Ball","playAudioSprite","restartBall","isDestroyed","destroy","pop","addScore","name","modifier","amount","total","sprite","delay","spritemap","cache","json","get","setTimeout","Math","floor","random","alert","message","timeout","text","innerText","playAlerts","i","undefined","innerHTML","loop","setInterval","tableWidth","canvas","offsetWidth","leftButton","rightButton","bottom"],"mappings":"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","sourcesContent":["/* \r\n\r\nSouth Park Pinball v1.0\r\n\r\nBuilt by Riley Hemphill @ The Creative Circus, 2019\r\n\r\n*/\r\n\r\n//Initial config\r\nconst config = {\r\n\ttype: Phaser.CANVAS,\r\n\twidth: 520,\r\n\theight: 800,\r\n\tphysics: {\r\n\t\tdefault: \"matter\",\r\n\t\tmatter: {\r\n\t\t\tdebug: false,\r\n\t\t\tgravity: {\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0.9\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgame: {\r\n\t\tballs: 3\r\n\t},\r\n\tscene: {\r\n\t\tpreload: preload,\r\n\t\tcreate: create,\r\n\t\tupdate: update\r\n\t}\r\n};\r\n\r\n//Declare global variables\r\n\r\nlet table,\r\n\tramps,\r\n\tcharacters,\r\n\tleftFlipper,\r\n\trightFlipper,\r\n\tsideFlipper,\r\n\tbumperA,\r\n\tbumperB,\r\n\tbumperC,\r\n\tleftSlingshot,\r\n\trightSlingshot,\r\n\tlauncher,\r\n\tball,\r\n\tspacebar,\r\n\tleft,\r\n\tright,\r\n\tdown,\r\n\tcollisionGroupA,\r\n\tcollisionGroupB,\r\n\tcollisionGroupC,\r\n\tcollisionGroupD,\r\n\tcollisionGroupE,\r\n\tsensorGroupA,\r\n\tsensorGroupB,\r\n\tcartmanLeft,\r\n\tcartmanCenter,\r\n\tcartmanRight,\r\n\tcartmanBlock,\r\n\trampsCartmanActive,\r\n\trampsCartmanGate,\r\n\tbuttersLightOn,\r\n\tgameActive,\r\n\tbackgroundMusic,\r\n\teventMusic,\r\n\tlights,\r\n\tcurrentScene,\r\n\twelcomeScreen,\r\n\ttest;\r\n\r\nlet balls = [];\r\nlet currentBall = 0;\r\nlet multiplier = 1;\r\nlet score = 0;\r\nlet rampsLit = 0;\r\nlet cartmanCanStart = true;\r\nlet alerts = [];\r\n\r\nconst Bodies = Phaser.Physics.Matter.Matter.Bodies;\r\nconst game = new Phaser.Game(config);\r\n\r\nif (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n\tgame.config.isMobile = true;\r\n} else {\r\n\tgame.config.isMobile = false;\r\n}\r\n\r\n//Create\r\n\r\nfunction create() {\r\n\tdocument.body.style.visibility = \"visible\";\r\n\tcurrentScene = this;\r\n\twelcomeScreen = document.querySelector(\".start-screen\");\r\n\twelcomeScreen.addEventListener(\"click\", () => {\r\n\t\twelcomeScreen.style.visibility = \"hidden\";\r\n\t\tnewGame(this);\r\n\t});\r\n\t//Size to fit\r\n\tdocument.querySelector(\"canvas\").style.maxHeight = window.innerHeight + \"px\";\r\n\tdocument.querySelector(\"canvas\").style.minHeight = window.innerHeight + \"px\";\r\n\r\n\tinitDomControls();\r\n\r\n\t//Move score section to the right of the newly created canvas\r\n\tlet displaySection = document.querySelector(\".display\");\r\n\tdocument.body.appendChild(displaySection);\r\n\r\n\ttest = this;\r\n\r\n\tplayRandomSound(\"intro_music\", this);\r\n\r\n\t//What to do on click\r\n\tthis.input.on(\r\n\t\t\"pointerdown\",\r\n\t\tfunction(pointer) {\r\n\t\t\t// console.log(pointer.x+\",\", pointer.y)\r\n\t\t\t// ball = new Ball(this, pointer.x, pointer.y, 'ball')\r\n\t\t\t// ball.setVelocityY(-20)\r\n\t\t\t// ball.setVelocityX(-20)\r\n\t\t\t//Start a new game\r\n\t\t\t// newGame(this)\r\n\t\t},\r\n\t\tthis\r\n\t);\r\n\r\n\t//Setup collision groups\r\n\tsensorGroupA = this.matter.world.nextCategory(); // Ground level sensors\r\n\tsensorGroupB = this.matter.world.nextCategory(); // Upper level sensors\r\n\tcollisionGroupA = this.matter.world.nextCategory(); // Ball\r\n\tcollisionGroupB = this.matter.world.nextCategory(); // Walls\r\n\tcollisionGroupC = this.matter.world.nextCategory();\r\n\tcollisionGroupD = this.matter.world.nextCategory();\r\n\tcollisionGroupE = this.matter.world.nextCategory();\r\n\r\n\t//Setup controls\r\n\tleft = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.LEFT);\r\n\tdown = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.DOWN);\r\n\tright = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.RIGHT);\r\n\tspacebar = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\r\n\r\n\tinitLights(this);\r\n\r\n\t//Textures\r\n\ttable = this.add.image(260, 400, \"table\").setDepth(1);\r\n\tramps = this.add.image(260, 400, \"ramps\").setDepth(4);\r\n\trampsCartmanActive = this.add.image(260, 400, \"ramps_cartman_active\").setDepth(1);\r\n\trampsCartmanGate = this.add.image(260, 400, \"ramps_cartman_gate\").setDepth(1);\r\n\tcharacters = this.add\r\n\t\t.image(260, 380, \"characters\")\r\n\t\t.setDepth(5)\r\n\t\t.setScale(0.4);\r\n\r\n\t//Flippers\r\n\tleftFlipper = new LeftFlipper(this, 150, 632);\r\n\trightFlipper = new RightFlipper(this, 327, 632);\r\n\tsideFlipper = new SideFlipper(this, 407, 313);\r\n\r\n\t//Pop bumpers\r\n\tbumperA = new Bumper(this, 308, 125, \"bumper\");\r\n\tbumperB = new Bumper(this, 365, 135, \"bumper\");\r\n\tbumperC = new Bumper(this, 335, 190, \"bumper\");\r\n\r\n\t//Slingshots\r\n\tleftSlingshot = new Slingshot(this, 121, 490, 152, 574, 177, 510, 5, \"leftSlingshot\");\r\n\trightSlingshot = new Slingshot(this, 353, 491, 324, 574, 298, 510, 5, \"rightSlingshot\");\r\n\r\n\t//Launcher\r\n\tlauncher = new Launcher(this, 455, 755);\r\n\r\n\t//Static Objects\r\n\t/*********************************************************/\r\n\t//See static-objects.js\r\n\r\n\tcreateStaticObjects(this);\r\n\r\n\t//Collision events\r\n\t/*********************************************************/\r\n\t//See collisions.js\r\n\r\n\tinitCollisionListeners(this);\r\n}\r\n\r\n//Update\r\n/*********************************************************/\r\n\r\nfunction update() {\r\n\tif (Phaser.Input.Keyboard.JustDown(left)) {\r\n\t\tleftFlipper.flip();\r\n\t}\r\n\r\n\tif (Phaser.Input.Keyboard.JustUp(left)) {\r\n\t\tleftFlipper.release();\r\n\t}\r\n\r\n\tif (Phaser.Input.Keyboard.JustDown(right)) {\r\n\t\trightFlipper.flip();\r\n\t\tsideFlipper.flip();\r\n\t}\r\n\r\n\tif (Phaser.Input.Keyboard.JustUp(right)) {\r\n\t\trightFlipper.release();\r\n\t\tsideFlipper.release();\r\n\t}\r\n\r\n\tif (Phaser.Input.Keyboard.JustDown(down)) {\r\n\t\tlauncher.charge();\r\n\t}\r\n\r\n\tif (Phaser.Input.Keyboard.JustUp(down)) {\r\n\t\tlauncher.fire();\r\n\t}\r\n\r\n\t//Round is over when no balls are in play\r\n\tif (balls.length === 0) {\r\n\t\t//Get a new ball if there are any remaining. Otherwise end the game.\r\n\t\tif (currentBall <= config.game.balls - 1 && gameActive) {\r\n\t\t\tgetNewBall(this);\r\n\t\t} else if (gameActive) {\r\n\t\t\tendGame(this);\r\n\t\t\tgameActive = false;\r\n\t\t}\r\n\t}\r\n\r\n\t//Events\r\n\r\n\t//Cartman\r\n\tif (lights.cartman.cartmanLeft.hit > 0 && lights.cartman.cartmanCenter.hit > 0 && lights.cartman.cartmanRight.hit > 0 && cartmanCanStart) {\r\n\t\tstartEvent(\"cartman\", this);\r\n\t}\r\n\r\n\t//Butters\r\n\tObject.keys(lights).forEach(el => {\r\n\t\tlights[el].hit > 0 && !buttersLightOn ? flashLights(\"butters\", 1) : null;\r\n\t});\r\n}\r\n\r\n//Functions\r\n/*********************************************************/\r\n\r\nfunction newGame(scene) {\r\n\tgameActive = true;\r\n\tscore = 0;\r\n\tmultiplier = 1;\r\n\tbackgroundMusic = scene.sound.add(\"background_music\");\r\n\tgetNewBall(scene);\r\n}\r\n\r\nfunction endGame(scene) {\r\n\tdocument.querySelector(\".start-screen > h1\").textContent = \"Game Over\";\r\n\tdocument.querySelector(\".byline\").textContent = \"Final score: \" + score;\r\n\tdocument.querySelector(\".start-screen > a\").textContent = \"\";\r\n\tdocument.querySelector(\".start-screen > p:nth-child(4)\").textContent = \"Click to play again\";\r\n\twelcomeScreen.style.visibility = \"visible\";\r\n\tbackgroundMusic.stop();\r\n\tscore = 0;\r\n\tdocument.querySelector(\".score\").textContent = score;\r\n\tcurrentBall = 0;\r\n}\r\n\r\nfunction getNewBall(scene) {\r\n\tclearLights();\r\n\tbackgroundMusic.play();\r\n\tball = new Ball(scene, 455, 669, \"ball\");\r\n\tscene.sound.playAudioSprite(\"sound_effects\", \"rollover\");\r\n\tcurrentBall++;\r\n\tdocument.querySelector(\".balls-remaining\").textContent = currentBall;\r\n}\r\n\r\nfunction restartBall(scene) {\r\n\tballs.forEach(el => {\r\n\t\tel.isDestroyed = true;\r\n\t\tel.destroy();\r\n\t\tballs.pop();\r\n\t\tbackgroundMusic.play();\r\n\t\tball = new Ball(scene, 455, 669, \"ball\");\r\n\t\tscene.sound.playAudioSprite(\"sound_effects\", \"rollover\");\r\n\t});\r\n}\r\n\r\nfunction addScore(name, modifier) {\r\n\tlet amount;\r\n\tswitch (name) {\r\n\t\tcase \"bumper\":\r\n\t\t\tamount = 1000;\r\n\t\t\tbreak;\r\n\t\tcase \"butters\":\r\n\t\t\tamount = 10000;\r\n\t\t\tbreak;\r\n\t\tcase \"ramp\":\r\n\t\t\tamount = 5000;\r\n\t\t\tbreak;\r\n\t\tcase \"cartman-win\":\r\n\t\t\tamount = 1000000;\r\n\t\t\tbreak;\r\n\t\tcase \"cartman-body\":\r\n\t\t\tamount = 25000;\r\n\t\t\tbreak;\r\n\t\tcase \"loop\":\r\n\t\t\tamount = 10000;\r\n\t\t\tbreak;\r\n\t\tcase \"jackpot\":\r\n\t\t\tamount = 25000 * modifier;\r\n\t\t\tbreak;\r\n\t\tcase \"super-jackpot\":\r\n\t\t\tamount = 500000;\r\n\t\t\tbreak;\r\n\t}\r\n\tlet total = amount * multiplier;\r\n\tscore += total;\r\n\tdocument.querySelector(\".score\").textContent = score;\r\n}\r\n\r\nfunction playRandomSound(sprite, scene, delay) {\r\n\tlet spritemap = Object.keys(scene.cache.json.get(sprite).spritemap);\r\n\tsetTimeout(() => {\r\n\t\tscene.sound.playAudioSprite(sprite, spritemap[Math.floor(Math.random() * spritemap.length)]);\r\n\t}, delay);\r\n}\r\n\r\nfunction alert(message, timeout) {\r\n\tlet text = document.querySelector(\".alert-window\");\r\n\ttext.innerText = message;\r\n\r\n\tsetTimeout(() => {\r\n\t\ttext.innerText === message ? (text.innerText = \"\") : null;\r\n\t}, timeout);\r\n}\r\n\r\nfunction playAlerts(alerts) {\r\n\tlet text = document.querySelector(\".alert-window\");\r\n\tlet i = 0;\r\n\talerts[i] != undefined ? (text.innerHTML = alerts[i]) : null;\r\n\tlet loop = setInterval(() => {\r\n\t\tif (i < alerts.length - 1) {\r\n\t\t\ti++;\r\n\t\t\talerts[i] != undefined ? (text.innerHTML = alerts[i]) : null;\r\n\t\t} else if (alerts.length > 0) {\r\n\t\t\ti = 0;\r\n\t\t\talerts[i] != undefined ? (text.innerHTML = alerts[i]) : null;\r\n\t\t} else {\r\n\t\t\ttext.innerHTML = \"\";\r\n\t\t}\r\n\t}, 3000);\r\n}\r\n\r\nfunction initDomControls() {\r\n\tlet tableWidth = game.canvas.offsetWidth;\r\n\tif (game.config.isMobile === true) {\r\n\t\tlet leftButton = document.querySelector(\".left-button\");\r\n\t\tlet rightButton = document.querySelector(\".right-button\");\r\n\t\tleftButton.style.visibility = \"visible\";\r\n\t\trightButton.style.visibility = \"visible\";\r\n\t\tleftButton.style.bottom = \"20px\";\r\n\t\trightButton.style.bottom = \"20px\";\r\n\t\tleftButton.style.left = \"30px\";\r\n\t\trightButton.style.left = tableWidth - 175 + \"px\";\r\n\t\tleftButton.addEventListener(\"touchstart\", function() {\r\n\t\t\tleftFlipper.flip();\r\n\t\t});\r\n\r\n\t\tleftButton.addEventListener(\"touchend\", function() {\r\n\t\t\tleftFlipper.release();\r\n\t\t});\r\n\r\n\t\trightButton.addEventListener(\"touchstart\", function() {\r\n\t\t\trightFlipper.flip();\r\n\t\t});\r\n\r\n\t\trightButton.addEventListener(\"touchend\", function() {\r\n\t\t\trightFlipper.release();\r\n\t\t});\r\n\t}\r\n}\r\n\r\ndocument.querySelector(\"#reload-button\").addEventListener(\"click\", function() {\r\n\trestartBall(currentScene);\r\n});\r\n"],"file":"game.js"}