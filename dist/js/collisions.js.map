{"version":3,"sources":["collisions.js"],"names":["initCollisionListeners","scene","matter","world","on","event","bodyA","bodyB","label","registerHit","type","isOnRamp","isOnPlastic","isInMotion","scorePrevious","currentScore","score","combo","isOnCenterRamp","playRandomSound","setTimeout","isOnLauncher","leftSlingshot","fire","rightSlingshot","gameObject","position","addScore","sound","playAudioSprite","volume","sounds","Math","floor","random","length"],"mappings":"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","sourcesContent":["function initCollisionListeners(scene) \r\n{\r\n    scene.matter.world.on('collisionstart', (event, bodyA, bodyB) => \r\n    {\r\n        if (bodyB.label === 'Ball') \r\n        {\r\n            //Butters target \r\n            if ( bodyA.label === 'butters' ) \r\n            {   \r\n                registerHit(scene, bodyA.label, bodyB)\r\n            }\r\n            //Generic ramp on\r\n            if (bodyA.type === 'ramp-on')\r\n            {\r\n                bodyB.isOnRamp = true\r\n                bodyB.isOnPlastic = true\r\n            }            \r\n            if (bodyA.label === 'leftRampOn')\r\n            {\r\n                bodyB.isOnPlastic = true\r\n            }    \r\n            if (bodyA.label === 'cartman-himself')\r\n            {\r\n                registerHit(scene, bodyA.type, bodyA.label)\r\n            }     \r\n            if (bodyA.label === 'rightTargets')\r\n            {\r\n                registerHit(scene, bodyA.label)\r\n            }     \r\n            if (bodyA.label === 'flipper')\r\n            {\r\n                //This function evaluates whether the ball is in an active combo. \r\n                //See ball.js for info on how it works\r\n                if ( bodyB.isInMotion )\r\n                {\r\n                    bodyB.isInMotion = false\r\n                    let scorePrevious = bodyB.currentScore\r\n                    bodyB.currentScore = score\r\n                    bodyB.currentScore > scorePrevious ? bodyB.combo++ : bodyB.combo = 0\r\n                }   \r\n            }\r\n        }\r\n    })\r\n    scene.matter.world.on('collisionend', (event, bodyA, bodyB) => \r\n    {\r\n        if (bodyB.label === 'Ball') \r\n        {\r\n            //Kenny ramp\r\n            if (bodyA.label === 'leftRampHit' && !bodyB.isOnCenterRamp)\r\n            {\r\n                playRandomSound('kenny_hit', scene)\r\n            }\r\n            //Stan ramp\r\n            if (bodyA.label === 'centerRampHit')\r\n            {\r\n                playRandomSound('stan_hit', scene)\r\n            }\r\n            //Kyle ramp\r\n            if (bodyA.label === 'rightRampHit')\r\n            {\r\n                playRandomSound('kyle_hit', scene)\r\n            }\r\n            //Cartman targets \r\n            if (bodyA.type === 'cartman-hit')\r\n            {\r\n                registerHit(scene, bodyA.type, bodyA.label)\r\n            }\r\n\r\n            if (bodyA.label === 'centerRampOn')\r\n            {\r\n                bodyB.isOnCenterRamp = true\r\n            }\r\n\r\n            if (bodyA.type === 'loop-hit')\r\n            {\r\n                registerHit(scene, bodyA.type)\r\n            }\r\n\r\n            //Generic ramp on\r\n            if (bodyA.type === 'ramp-on')\r\n            {\r\n                bodyB.isOnRamp = true\r\n                bodyB.isOnPlastic = true\r\n            } \r\n\r\n            //Generic ramp off\r\n            if (bodyA.type === 'ramp-off')\r\n            {\r\n                setTimeout(function(){\r\n                    bodyB.isOnRamp = false\r\n                    bodyB.isOnCenterRamp = false\r\n                }, 100)\r\n            }\r\n\r\n            if (bodyA.type === 'all-ramps-off')\r\n            {\r\n                bodyB.isOnRamp = false\r\n                bodyB.isOnCenterRamp = false\r\n                bodyB.isOnPlastic = false\r\n            }\r\n\r\n            //Launcher on / off\r\n            if (bodyA.type === 'launcher-on')\r\n            {\r\n                bodyB.isOnLauncher = true\r\n            }\r\n\r\n            if (bodyA.type === 'launcher-off')\r\n            {\r\n                bodyB.isOnLauncher = false\r\n            }\r\n        \r\n            //Slingshots\r\n            if (bodyA.label === 'leftSlingshot')\r\n            {\r\n                leftSlingshot.fire()\r\n            }\r\n\r\n            if (bodyA.label === 'rightSlingshot')\r\n            {\r\n                rightSlingshot.fire()\r\n            }\r\n\r\n            //Pop bumpers\r\n            if ( bodyA.label === \"bumper\") \r\n            {\r\n                bodyA.gameObject.fire(bodyB.position)\r\n                addScore('bumper')\r\n            }\r\n\r\n            //Rails \r\n            if (bodyA.type === 'rail')\r\n            {\r\n                scene.sound.playAudioSprite('sound_effects', 'WireRamp', {\r\n                    volume: 0.5\r\n                })\r\n                bodyB.isOnPlastic = false\r\n                addScore('ramp')\r\n            }\r\n\r\n            //Rubbers \r\n            if (bodyA.label === 'rubber')\r\n            {\r\n                let sounds = ['rubber_hit_1', 'rubber_hit_2', 'rubber_hit_3']\r\n                scene.sound.playAudioSprite('sound_effects', sounds[Math.floor(Math.random()*3)])\r\n            }\r\n\r\n            //Flippers \r\n            if (bodyA.label === 'flipper')\r\n            {\r\n                let sounds = ['flip_hit_1', 'flip_hit_2', 'flip_hit_3']\r\n                scene.sound.playAudioSprite('sound_effects', sounds[Math.floor(Math.random()*sounds.length)])\r\n            }\r\n        }\r\n    })\r\n}"],"file":"collisions.js"}