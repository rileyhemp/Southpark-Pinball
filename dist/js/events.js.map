{"version":3,"sources":["events.js"],"names":["startEvent","name","scene","duration","startCartman","setTimeout","lights","hit","endCartman","cartmanCanStart","flashLights","sound","playAudioSprite","playRandomSound","rampsCartmanGate","setDepth","targets","cartmanRight","cartmanLeft","cartmanCenter","cartmanBlock","target","object","setCollidesWith","collisionGroupD","result","cartman","clearInterval","isFlashing","addScore","collisionGroupA"],"mappings":";;AAAA,SAASA,UAAT,CAAoBC,IAApB,EAA0BC,KAA1B,EACA;AACI,UAAOD,IAAP;AAEI,SAAK,SAAL;AACI,UAAIE,QAAQ,GAAG,IAAf,CADJ,CACwB;;AACpBC,MAAAA,YAAY,CAACF,KAAD,CAAZ;AACAG,MAAAA,UAAU,CAAC,YACX;AACIC,QAAAA,MAAM,CAAC,aAAD,CAAN,CAAsBC,GAAtB,GAA4B,CAA5B,GAAgCC,UAAU,CAACN,KAAD,EAAQ,KAAR,CAA1C,GAA2DM,UAAU,CAACN,KAAD,EAAQ,MAAR,CAArE;AACH,OAHS,EAGPC,QAHO,CAAV;AALR;AAUH;;AAED,SAASC,YAAT,CAAsBF,KAAtB,EACA;AACIO,EAAAA,eAAe,GAAG,KAAlB,CADJ,CAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;;AAEAC,EAAAA,WAAW,CAAC,SAAD,CAAX;AAEGR,EAAAA,KAAK,CAACS,KAAN,CAAYC,eAAZ,CAA4B,eAA5B,EAA6C,OAA7C;AACHC,EAAAA,eAAe,CAAC,eAAD,EAAkBX,KAAlB,EAAyB,GAAzB,CAAf;AACAY,EAAAA,gBAAgB,CAACC,QAAjB,CAA0B,CAA1B,EAlBD,CAmBI;AAEA;;AACA,MAAIC,OAAO,GAAG,CAACC,YAAD,EAAeC,WAAf,EAA4BC,aAA5B,EAA2CC,YAA3C,CAAd;;AACA,OAAM,IAAIC,MAAV,IAAoBL,OAApB,EACA;AACIA,IAAAA,OAAO,CAACK,MAAD,CAAP,CAAgBC,MAAhB,CAAuBC,eAAvB,CAAuCC,eAAvC;AACH;AACJ;;AAED,SAAShB,UAAT,CAAoBN,KAApB,EAA2BuB,MAA3B,EACA;AACCnB,EAAAA,MAAM,CAACoB,OAAP,CAAeR,WAAf,CAA2BX,GAA3B,GAAiC,CAAjC;AACAD,EAAAA,MAAM,CAACoB,OAAP,CAAeP,aAAf,CAA6BZ,GAA7B,GAAmC,CAAnC;AACAD,EAAAA,MAAM,CAACoB,OAAP,CAAeT,YAAf,CAA4BV,GAA5B,GAAkC,CAAlC;AACAoB,EAAAA,aAAa,CAACrB,MAAM,CAACoB,OAAP,CAAeE,UAAhB,CAAb;AACAd,EAAAA,gBAAgB,CAACC,QAAjB,CAA0B,CAA1B,EALD,CAMI;;AACA,MAAIU,MAAM,KAAK,KAAf,EACA;AACFI,IAAAA,QAAQ,CAAC,aAAD,CAAR;AACMhB,IAAAA,eAAe,CAAC,aAAD,EAAgBX,KAAhB,EAAuB,GAAvB,CAAf;AACH,GAJD,MAKA,CACI;AACH;;AACDI,EAAAA,MAAM,CAAC,aAAD,CAAN,CAAsBC,GAAtB,GAA4B,CAA5B;AACAL,EAAAA,KAAK,CAACS,KAAN,CAAYC,eAAZ,CAA4B,eAA5B,EAA6C,qBAA7C;AACA,MAAII,OAAO,GAAG,CAACC,YAAD,EAAeC,WAAf,EAA4BC,aAA5B,EAA2CC,YAA3C,CAAd;;AACA,OAAM,IAAIC,MAAV,IAAoBL,OAApB,EACA;AACIA,IAAAA,OAAO,CAACK,MAAD,CAAP,CAAgBC,MAAhB,CAAuBC,eAAvB,CAAuCO,eAAvC;AACN,GArBF,CAsBC;;AACA","sourcesContent":["function startEvent(name, scene)\r\n{\r\n    switch(name) \r\n    {\r\n        case \"cartman\" :\r\n            let duration = 5000 //14500\r\n            startCartman(scene)\r\n            setTimeout(()=>\r\n            {\r\n                lights['cartmanBody'].hit > 4 ? endCartman(scene, 'win') : endCartman(scene, 'loss')\r\n            }, duration)\r\n    }\r\n}\r\n\r\nfunction startCartman(scene)\r\n{\r\n    cartmanCanStart = false\r\n    // eventMusic = scene.sound.add('cartman_music')\r\n    // setTimeout(()=>\r\n    //     {\r\n    //         backgroundMusic ? backgroundMusic.pause() : null\r\n    //         eventMusic.play()\r\n    //         scene.tweens.add({\r\n    //             targets: eventMusic,\r\n    //             volume: { from: 0, to: 1 },\r\n    //             duration: 1000,\r\n    //         })\r\n\t//     }, 2000)\r\n\r\n\tflashLights('cartman')\r\n\t\r\n    scene.sound.playAudioSprite('sound_effects', 'Drain')\r\n\tplayRandomSound('cartman_start', scene, 500)\r\n\trampsCartmanGate.setDepth(0)\r\n    //Reset the counter\r\n\r\n    //Open the cartman ramp once all targets are hit\r\n    let targets = [cartmanRight, cartmanLeft, cartmanCenter, cartmanBlock]\r\n    for ( let target in targets )\r\n    {\r\n        targets[target].object.setCollidesWith(collisionGroupD)\r\n    }\r\n}\r\n\r\nfunction endCartman(scene, result)\r\n{\r\n\tlights.cartman.cartmanLeft.hit = 0\r\n\tlights.cartman.cartmanCenter.hit = 0\r\n\tlights.cartman.cartmanRight.hit = 0\r\n\tclearInterval(lights.cartman.isFlashing)\r\n\trampsCartmanGate.setDepth(2)\r\n    // eventMusic.stop()\r\n    if (result === 'win' )\r\n    {\r\n\t\taddScore('cartman-win')\r\n        playRandomSound('cartman_end', scene, 500)\r\n    } else \r\n    {\r\n        // playRandomSound('generic_negative', scene, 500)\r\n    }\r\n    lights['cartmanBody'].hit = 0\r\n    scene.sound.playAudioSprite('sound_effects', 'kicker_enter_center')\r\n    let targets = [cartmanRight, cartmanLeft, cartmanCenter, cartmanBlock]\r\n    for ( let target in targets )\r\n    {\r\n        targets[target].object.setCollidesWith(collisionGroupA)\r\n\t}\r\n\t//cartmanCanStart = true\r\n}"],"file":"events.js"}